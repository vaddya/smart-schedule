\include{settings}
\begin{document}	% начало документа
\include{titlepage}

% Содержание
\tableofcontents
\newpage



\section{Умное расписание}

\subsection{Задание}

Реализовать приложение на Java, которое позволяет вводить и просматривать учебное расписание и домашние задания, необходимые выполнить к определенной дате.

\subsection{Концепция}

Созданное приложение должно давать пользователю возможность ведения интерактивного расписания и добавления заданий по различным предметам. Также расписание должно обладать графическим веб-интерфейсом, который позволит визуализировать заявленную функциональность и упростить общение с программой. Возможным расширением может стать приложение для операционной системы Android.

\subsection{Минимально работоспособный продукт}

Консольное приложение, позволяющее пользователю вводить и просматривать учебное расписание и домашние задания.

\subsection{Диаграмма прецедентов использования}

\begin{figure}[H]
	\begin{center}
		\includegraphics[width=5cm]{pics/logo}
		\caption{Диаграмма прецедентов использования} 
		\label{pic:use_case_diagram} % название для ссылок внутри кода
	\end{center}
\end{figure}

Выше показана диаграмма прецедентов использования редактора футбольного турнира. Пользователь, он же редактор, может задавать настройки соревнования, сохранять текущее состояние и начинать турнир. В рамках соревнования пользователь может задавать результаты матчей.

\subsection{Выводы}
В данном разделе была рассмотрена предметная область данного приложения, приведенеы правила игры в футбол и определены диаграмма прецедентов использования и минимально работоспособный продукт.

\section{Проектирование умного расписания}

В процессе проектирования было решено выделить 4 подпроекта:
\begin{enumerate}
\item Core - библиотека, содержащfz всю бизнес-логику проекта;
\item ConsoleApp - консольное приложение, позволяющее взаимодействовать пользователю с библиотекой через командную строку;
\item GUIApp - графическое приложение, позволяющее взаимодействовать пользователю с библиотекой через графический интерфейс. Создано средставами Qt Designer.
\item Tests - тесты, позволяющие тестировать функциональность библиотеки с помощью автоматических тестов.
\end{enumerate}

\subsection{Диаграмма компонентов}

\begin{figure}[H]
	\begin{center}
		\includegraphics[width=5cm]{pics/logo}
		\caption{Диаграмма компонентов} 
		\label{pic:component_diagram} % название для ссылок внутри кода
	\end{center}
\end{figure}

Выше представлена диаграмма компонентов, где Core - библиотека, GUI App - графическое прилоежение и Console App - консольное приложение.

\subsection{Интерфейс библиотеки}

Ввиду особенностей задачи было решено не выделять интерфейс библиотеки в отдельный класс, а использовать методы класса \verb+Competition+ напрямую.

\begin{enumerate}
    \item Метод, позволяющий задать название турнира
    
    \verb+void setTitle( string title );+


    \item Метод, позволяющий добавить команду в турнир

    \verb+void addTeam( string name );+


    \item Метод, позволяющий получить название турнира

    \verb+string &getTitle();+    


    \item Метод, позволяющий текущее количество команд, участвующих в турнире

%    \verb+unsigned getNumberOfTeams() const;+


    \item Метод, позволяющий получить команды, участвующие в турнире

    \verb+vector<Team> &getTeams();+


    \item Метод, позволяющий начать групповую стадию турнира

    \verb+void startGroupStage();+ 
    
    
    \item Метод, позволяющий получить объект класса \verb+GroupStage+
    
    \verb+GroupStage &getGroupStage();+


    \item Метод, позволяющий начать стадию плей-офф

    \verb+void startPlayOffStage();+


    \item Метод, позволяющий получить объект класса \verb+PlayoffStage+
    
    \verb+PlayoffStage &getPlayoffStage();+   


    \item Метод, позволяющий начать групповую стадию заново

    \verb+void restartGroupStage();+


    \item Метод, позволяющий удалить команды, участвующие в турнире

    \verb+void clearTeams();+
\end{enumerate}

\subsection{Станадрт}
В качестве стандарта языка был выбран C++11. Разработка велась в IDE Qt~Creator. Разработка графического приложения использовалась среда Qt~Designer.

\subsection{Выводы}
В данной главе было рассмотрено проектирование футбольного редактора: определена диаграмма компонентов, интерфейс библиотеки и выбран стандарт языка \verb|C++|, на котором будет вестись разработка.

\section{Реализация умного расписания}

\subsection{Среда разработки}

В процессе разработки использовались 2 среды:
\begin{enumerate}
\item Linux Ubuntu 14.04
	\begin{itemize}
	\item IDE: Qt Creator 3.5.1 основанная Qt 5.4.0
	\item Компилятор: GCC 4.8.4 (x86 64 bit)
	\end{itemize}
\item Windows 8.1
	\begin{itemize}
	\item IDE: Qt Creator 3.6.0 основанная Qt 5.5.1 (MSVC 2013, 32 bit)
	\item Компилятор: MinGW 4.9.2 32bit
	\end{itemize}
\end{enumerate}

\subsection{Основные классы}
Были написаны классы для каждой составляющей футбольного соревнования:
\begin{itemize}
\item \verb+Competition+, упомянутый выше
\item \verb+GroupStage+ для представления групповой стадии турнира
\item \verb+PlayoffStage+ для представления плей-офф стадии турнира
\item \verb+Team+ для представления команды, участвующей в турнире
\item \verb+TeamStat+ расширяющий класс \verb+Team+ статистикой
\item \verb+Group+ для представления группы в групповой стадии турнира
\item \verb+Round+ для представления раунда в плей-офф стадии турнира
\item \verb+Match+ для представления матча между двумя командами
\item \verb+IdGenerator+ для создания уникальных ID у команд, групп и матчей
\item \verb+Randomiser+ для получения случайного значения
\end{itemize}

\subsection{Снимки экранов пользовательского интерфейса}
\subsubsection{Командная строка}

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.8]{pics/logo}
		\caption{Главное меню} 
		\label{pic:cli_main_menu} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:cli_main_menu} представлено главное меню. Пользователю предлагается выбрать один из пунктов меню: новое соревнование, загрузка соревнования или выход.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.8]{pics/logo}
		\caption{Настройки} 
		\label{pic:cli_settings} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:cli_settings} представлено меню настроек турнира. Пользователю предлагается выбрать один из пунктов меню: указать название соревнования, ввести команды из консоли, указать файл, откуда необходимо считать команды, вывести на экран текущи настройки, сбросить настройки или выйти.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.8]{pics/logo}
		\caption{Групповая стадия} 
		\label{pic:cli_group_stage} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:cli_group_stage} представлен вывод в консоль турнирного положения команд в группах, где столбец M - матчи, W - победы, D - ничьи, L - поражения, GF - забитые голы, GA - пропущенные голы, GD - разница голов, P - очки.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.8]{pics/logo}
		\caption{Стадия плей-офф} 
		\label{pic:cli_playoff_stage} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:cli_playoff_stage} представлен режим работы плей-офф стадии турнира. Пользователю предлагается выбрать один из пунктов меню: вывести в консоль таблицу, вывести в консоль матчи, ввести результаты матчей, симулировать результаты матчей, перейти к следующему раунд или выйти.

\subsubsection{Графический интерфейс}

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.52]{pics/logo}
		\caption{Главное меню} 
		\label{pic:gui_main_menu} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:gui_main_menu} показано главное меню приложения. Пользователю предлагается выбрать один из пунктов меню: начать новый турнир, загрузить турнир или выйти.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.52]{pics/logo}
		\caption{Настройки} 
		\label{pic:gui_settings} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:gui_tables_playoff_stage} показано окно создания новго турнира. Пользователю предлагается указать название турнира, задать количество участвующих команд и выбрать команды из предложенного списка.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.52]{pics/logo}
		\caption{Матчи в групповой стадии} 
		\label{pic:gui_matches_group_stage} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:gui_tables_playoff_stage} показано окно ввода результатов матчей групповй стадии. Для каждой группы отдельное окно ввода результатов мачтей.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.52]{pics/logo}
		\caption{Таблица в групповой стадии} 
		\label{pic:gui_tables_group_stage} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:gui_tables_playoff_stage} показано окно с таблицей группы. Для каждой группы отдельное окно ввода результатов мачтей.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.52]{pics/logo}
		\caption{Матчи в плей-офф} 
		\label{pic:gui_matches_playoff_stage} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:gui_tables_playoff_stage} показано окно ввода результатов матчей плей-офф стадии.

\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.52]{pics/logo}
		\caption{Таблица в плей-офф} 
		\label{pic:gui_tables_playoff_stage} % название для ссылок внутри кода
	\end{center}
\end{figure}
На рис. \ref{pic:gui_tables_playoff_stage} показано окно с таблицей плей=офф стадии турнира.

\subsection{Выводы}
В данной главе была рассмотрена реализация футбольного редактора, рассмотрены основные классы библиотеки и приведены снимики экрана работающего приложения.

\section{Процесс обеспечения качества и тестирование}

\subsection{Утилиты}
В процессе использовались множество утилит, таких как:
\begin{itemize}
\item qmake -- утилита для генерирования make-файла;
\item Doxygen -- утилита для документации кода;
\item Cppcheck -- утилита для анализа C++ кода;
\item CLOC:
\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.7]{pics/logo}
		\caption{Утилита CLOC} 
		\label{pic:cloc} % название для ссылок внутри кода
	\end{center}
\end{figure}
CLOC -- это утилита для подсчета количества строк кода.

\item Gcovr:
\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.7]{pics/logo}
		\caption{Утилита Gcovr} 
		\label{pic:gcovr} % название для ссылок внутри кода
	\end{center}
\end{figure}
Gcovr -- это утилита для расчета покрытия тестами.

\item Valgrind:
\begin{figure}[H]
	\begin{center}
		\includegraphics[scale=0.7]{pics/logo}
		\caption{Утилита Valgrind} 
		\label{pic:valgrind} % название для ссылок внутри кода
	\end{center}
\end{figure}
\end{itemize}
Valgrind -- это утилита для нахождения утечек памяти.


\subsection{Непрерывная интеграция}
В процессе работы использовалась система непрерывной интеграции Jenkins. \textbf{Непрерывная интеграция} (англ. Continuous Integration, далее CI) — это практика разработки программного обеспечения, которая заключается в выполнении частых автоматизированных сборок проекта для скорейшего выявления и решения проблем интеграции результатов работы нескольких разработчиков. С помощью интеграционных сборок можно избавиться от синдрома «не знаю, на моей машине всё работает». Также мы защищаемся от «плохого кода», часто повторяющихся багов, «кривых» слияний. CI увеличивает возможности обратной связи потому, что она позволяет следить за состоянием проекта в течение разработки.

\subsection{Просмотр кода (code review) и и демонстрации}
В течении семестра были сделаны только одно ревью и только одно демо, что несомненно сказалось в худшую сторону на качестве кода. Тем не менее теперь я понял значимость ревью и осознал его необходимость в процессе работы.

\subsection{Тестирование}
При разработке приложения были написаны автоматические тесты при помощи фреймворка QtTest, целью которых было выявить неправильное поведение библиотеки. Из-за того, что они покрывали не все классы, как видно на рис. \ref{pic:gcovr}, то не все сценарии работы приложения тестировались автоматически. В процессе выполнения задания также производилось ручное тестирование.

\subsection{Выводы}
В данной главе были рассмотрены используемые в процессе разработки утилиты, оценен вклад просмотра кода и демонстраций, рассмотрена практика непрерывной интеграции, а также сделаны выводы о тестировани приложения.

\section{Выводы}
При выполнении задания были закреплены навыки в работе с объектно-ориентированным проектированием и получен опыт в организации многофайлового проекта, создании модульных тестов, автоматизации тестов и использовании утилит, помогающих в разработке приложений.

Огромный шаг вперед сделан в плане практических навыков программирования и проектировании приложения.

Результатом работы стало рабочее приложение, позволяющее с помощью командной строки или графического интерфейса вести учет футбольного турнира, например Чемпионата Европы и Чемпионата Мира.

\end{document}
